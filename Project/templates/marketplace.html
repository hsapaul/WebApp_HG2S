{% extends "template_base.html" %}

{% block title %}
HG2S - Marktplatz
{% endblock %}

{% block content %}

<div class="headline-class mb-2">
    <h1 class="headline">Prompt Marktplatz</h1>
    <p class="subheadline">See what other Users prompted</p>
</div>

<div class="col-3 py-3">
    <form action="#" method="post">
            <select class="p-1" name="form-select" aria-label="Default select example">
                <option selected>{{ sort_alg }}</option>
                {% if sort_alg == "Popular Posts" %}
                <option>Recently Posted</option>
                {% elif sort_alg == "Recently Posted" %}
                <option>Popular Posts</option>
                {% endif %}
            </select>
            <button class="main-btn btn btn-lg w-70 d-inline py-0 px-4" id="submit_sort" name="submit_theme" type="submit">
                Sort
            </button>
    </form>
</div>


<!-- Render all Marketplace posts -->
{% if posts %}
{% for post in posts %}
<div class="post border rounded p-2">
    <h4>"{{ post.text_prompt }}"</h4>

    <!-- Here it was -->

    <!-- Post Datum -->
    {% if post.post_datum[:10] == today %}
    <p class="d-inline">{{ post.post_datum[10:] }}</p>
    {% else %}
    <p class="d-inline">{{ post.post_datum[:10] }}</p>
    {% endif %}

    <a href="/upvote_post/{{post.id}}">
        <button>Upvote ({{post.popularity}})</button>
    </a>
    <a href="/jstest/{{post.text_prompt}}">
        <button>Enter Dimension</button>
    </a>
    {% if session['session_user'] == post.user_name %}
    <p class="d-inline float-end">Author: YOU</p>
    <a href="/delete_post/{{post.id}}">
        <button class="d-inline float-end">delete</button>
    </a>
    {% else %}
    <p class="d-inline float-end">Author: {{ post.user_name }}</p>
    {% endif %}

</div>
{% endfor %}
{% else %}
<div class="mt-5">
    <p>There are no items in the marketplace.</p>
    <a href="/">Be the First to Post</a>
</div>
{% endif %}

{% endblock %}

